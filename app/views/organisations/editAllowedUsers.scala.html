@(organisation: Organisation, users: List[User], paginateData: utils.PaginateData, loggedInUser: Option[User], 
	activeOrg: Option[Organisation])(implicit flash: Flash, request: RequestHeader, messages: Messages, webJarAssets: WebJarAssets)

@import b3.vertical.fieldConstructor  // Declares a vertical field constructor as default
@import templates._

@main(Messages("organisations"), loggedInUser, activeOrg) {
	@titleArea(Messages("organisations"), Some(Messages("function.changeAllowedUsers")), 
		Some(controllers.routes.OrganisationController.edit(organisation.uuid)))
    @rowColumnCenter() {
        @paginate(paginateData, controllers.routes.OrganisationController.editAllowedUsers(organisation.uuid, _))

        @{
			val mediaList = users.map{ user =>
                routes.FileController.getThumbnailImage(user.uuid, models.Types.UserType.stringValue)
            }            
            val linkList = users.map((user: User) => controllers.routes.OrganisationController.changeAllowedUser(organisation.uuid, user.uuid, paginateData.page))
            val headingList = users.map(_.name)
            val textList = users.map(_.email)
            val activatedList = users.map((user: User) => organisation.allowedUsers.contains(user.uuid))

            mediaListToggle(mediaList, linkList, headingList, textList, activatedList)
        }
    }
}