@(organisationForm: Form[forms.OrganisationForm.Data], uuidToEdit: Option[String], loggedInUser: Option[models.User], activeOrg: Option[models.Organisation])(implicit flash: Flash,
    request: RequestHeader, messages: Messages, lang: Lang, webJarAssets: WebJarAssets)

@import b3.vertical.fieldConstructor
@import templates._

@updateNewText(update: Boolean) = @{
    if (uuidToEdit.isDefined) Messages("command.update") else Messages("command.add")
}

@main(Messages("organisations"), loggedInUser, activeOrg) {
    @rowMainSecondary() {
        @if(uuidToEdit.isDefined) {
            @title(Messages("organisations"), Some(Messages("function.edit")))
        } else {
            @title(Messages("organisations"), Some(Messages("function.create")))
        }
    }{
        @backButton(controllers.routes.OrganisationController.list(1))
    }
    <hr>
    @if(uuidToEdit.isDefined) {
    	@formColumn(updateNewText(true), routes.OrganisationController.submitEdit(uuidToEdit.get), updateNewText(true)) {
        	@b3.text(organisationForm("name"), '_label -> Messages("organisation.name"))
        }{
        	<hr>
        }
        
        @fileUploadFormColumn(routes.OrganisationController.submitImage(uuidToEdit.get))
        	
        @rowColumnCenter() {	
        	@editButton(controllers.routes.OrganisationController.editAllowedUsers(
        		uuidToEdit.get, 1), Some(Messages("organisation.changeAllowedUsers")))
        	<hr>
        	@deleteButton(controllers.routes.OrganisationController.delete(uuidToEdit.get))
        }
        
    } else {
    	@formColumn(updateNewText(false), routes.OrganisationController.submitCreate, updateNewText(false)) {
        	@b3.text(organisationForm("name"), '_label -> Messages("organisation.name"))
        }{
        	<hr>
        }    
    }
}


