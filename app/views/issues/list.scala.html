@import viewdata._

@(domainOpt: Option[Domain], issueListData: utils.ModelListData[Issue], parentObjectChains: List[utils.AmlObjectChain], 
	userStatus: UserStatus)(implicit flash: Flash, request: RequestHeader, 
	messages: Messages, lang: Lang, webJarAssets: WebJarAssets)    

@import templates._
@import components.buttons._
@import components.media._
@import components.utils._
@import forms._

@main(MainViewData(Messages("issues"), utils.NavTypes.Issues, userStatus)) {
	@title(Messages("issues"))
	@rowLargeSmall() {
    	@{
            val mediaList = issueListData.list.map((issue: Issue) =>
                routes.FileController.getThumbnailImage(issue.uuid, models.Types.IssueType.stringValue))
            val linkList = issueListData.list.map((issue: Issue) =>
                controllers.routes.IssueController.issue(issue.uuid, 1))
            val headingList = issueListData.list.map(_.name)
            val textList = (issueListData.list, parentObjectChains).zipped map((issue, objectChain) => 
            	objectChain.domain.name + " / " + objectChain.hierarchy.name + " / " +
            	objectChain.amlObjectChain.map(eoi => eoi.fold(_.name, _.name)).mkString(" / "))
            	
			paginate(issueListData.paginateData, 
				controllers.routes.IssueController.list(domainOpt.map(_.uuid).getOrElse(""), _))
			mediaListWithOneLink(mediaList, linkList, headingList, textList)
    	}
    }{
    }
}
